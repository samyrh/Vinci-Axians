<!doctype html>
<html class="no-js " lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <meta name="description" content="Responsive Bootstrap 4 and web Application ui kit.">

  <title>VINCI ENERGIES || ADMIN EDIT PROFIL</title>
  <link rel="icon" href="/assets/images/VinciLogo.png" type="image/x-icon">
  <!-- Favicon-->
  <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
  <!-- Custom Css -->
  <link rel="stylesheet" href="/assets/css/style.min.css">
  <style>
    .is-valid {
      border-color: #28a745; /* Green border for valid fields */
    }

    .is-invalid {
      border-color: #dc3545; /* Red border for invalid fields */
    }

    .invalid-feedback {
      display: none;
      color: #dc3545;
    }

    .is-invalid + .invalid-feedback {
      display: block;
    }
    /* Styles for the submit button */
    .ios-submit-btn:hover {
      background-color: #0063e0;
    }

    .ios-submit-btn:active {
      background-color: #0052b5;
    }

    /* Styles for the image preview modal */
    #imageModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.5);
    }

    #modalImg {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    #imageModal span {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
      color: #fff;
    }















    .card {
      background-color: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      padding: 20px;
    }

    .header h2 {
      font-size: 1.5rem;
      font-weight: 600;
      color: #333; /* Dark text for header */
      margin-bottom: 20px;
    }

    .form-control {
      background-color: #333;
      color: #e0e0e0;
      border-radius: 8px;
      border: 1px solid #444;
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3);
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      padding: 12px 16px;
    }

    .form-control::placeholder {
      color: #888;
    }

    .form-control:focus {
      border-color: #007bff;
      box-shadow: 0 0 0 0.2rem rgba(38, 143, 255, 0.25);
      outline: none;
    }

    .btn-primary {
      background-color: #007bff;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      font-size: 1rem;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      color: #0c0c0c;
      font-weight: 500;
      font-size: 0.9rem;
      margin-bottom: 8px;
      display: block;
    }


    .text-center {
      text-align: center;
    }
    .guest {
      color: #8e44ad; /* Purple for Guest */
    }
    .user {
      color: #3498db; /* Blue for User */
    }
    .manager {
      color: #e74c3c; /* Red for Manager */
    }
  </style>
</head>

<body class="theme-blush">


<!-- Overlay For Sidebars -->
<div class="overlay"></div>

<!-- Main Search -->
<div id="search">
  <button id="close" type="button" class="close btn btn-primary btn-icon btn-icon-mini btn-round">x</button>
  <form th:action="@{/home/search}" method="get">
    <input name="query" type="search" value="" placeholder="Search...Category,Material,User Anything..." />
    <button type="submit" class="btn btn-primary">Search</button>
  </form>
</div>

<!-- Right Icon menu Sidebar -->
<div class="navbar-right">
  <ul class="navbar-nav">
    <li><a href="#search" class="main_search" title="Search..."><i class="zmdi zmdi-search"></i></a></li>
    <li class="dropdown">
      <a href="javascript:void(0);" class="dropdown-toggle" title="App" data-toggle="dropdown" role="button"><i class="zmdi zmdi-apps"></i></a>
      <ul class="dropdown-menu slideUp2">
        <li class="header">App Sortcute</li>
        <li class="body">
          <ul class="menu app_sortcut list-unstyled">
            <li>
              <a href="image-gallery.html">
                <div class="icon-circle mb-2 bg-blue"><i class="zmdi zmdi-camera"></i></div>
                <p class="mb-0">Photos</p>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle mb-2 bg-amber"><i class="zmdi zmdi-translate"></i></div>
                <p class="mb-0">Translate</p>
              </a>
            </li>
            <li>
              <a href="events.html">
                <div class="icon-circle mb-2 bg-green"><i class="zmdi zmdi-calendar"></i></div>
                <p class="mb-0">Calendar</p>
              </a>
            </li>
            <li>
              <a href="contact.html">
                <div class="icon-circle mb-2 bg-purple"><i class="zmdi zmdi-account-calendar"></i></div>
                <p class="mb-0">Contacts</p>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle mb-2 bg-red"><i class="zmdi zmdi-tag"></i></div>
                <p class="mb-0">News</p>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle mb-2 bg-grey"><i class="zmdi zmdi-map"></i></div>
                <p class="mb-0">Maps</p>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="javascript:void(0);" class="dropdown-toggle" title="Notifications" data-toggle="dropdown" role="button"><i class="zmdi zmdi-notifications"></i>
        <div class="notify"><span class="heartbit"></span><span class="point"></span></div>
      </a>
      <ul class="dropdown-menu slideUp2">
        <li class="header">Notifications</li>
        <li class="body">
          <ul class="menu list-unstyled">
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle bg-blue"><i class="zmdi zmdi-account"></i></div>
                <div class="menu-info">
                  <h4>8 New Members joined</h4>
                  <p><i class="zmdi zmdi-time"></i> 14 mins ago </p>
                </div>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle bg-amber"><i class="zmdi zmdi-shopping-cart"></i></div>
                <div class="menu-info">
                  <h4>4 Sales made</h4>
                  <p><i class="zmdi zmdi-time"></i> 22 mins ago </p>
                </div>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle bg-red"><i class="zmdi zmdi-delete"></i></div>
                <div class="menu-info">
                  <h4><b>Nancy Doe</b> Deleted account</h4>
                  <p><i class="zmdi zmdi-time"></i> 3 hours ago </p>
                </div>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle bg-green"><i class="zmdi zmdi-edit"></i></div>
                <div class="menu-info">
                  <h4><b>Nancy</b> Changed name</h4>
                  <p><i class="zmdi zmdi-time"></i> 2 hours ago </p>
                </div>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle bg-grey"><i class="zmdi zmdi-comment-text"></i></div>
                <div class="menu-info">
                  <h4><b>John</b> Commented your post</h4>
                  <p><i class="zmdi zmdi-time"></i> 4 hours ago </p>
                </div>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle bg-purple"><i class="zmdi zmdi-refresh"></i></div>
                <div class="menu-info">
                  <h4><b>John</b> Updated status</h4>
                  <p><i class="zmdi zmdi-time"></i> 3 hours ago </p>
                </div>
              </a>
            </li>
            <li>
              <a href="javascript:void(0);">
                <div class="icon-circle bg-light-blue"><i class="zmdi zmdi-settings"></i></div>
                <div class="menu-info">
                  <h4>Settings Updated</h4>
                  <p><i class="zmdi zmdi-time"></i> Yesterday </p>
                </div>
              </a>
            </li>
          </ul>
        </li>
        <li class="footer"> <a href="javascript:void(0);">View All Notifications</a> </li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button"><i class="zmdi zmdi-flag"></i>
        <div class="notify"><span class="heartbit"></span><span class="point"></span></div>
      </a>
      <ul class="dropdown-menu slideUp2">
        <li class="header">Tasks List <small class="float-right"><a href="javascript:void(0);">View All</a></small></li>
        <li class="body">
          <ul class="menu tasks list-unstyled">
            <li>
              <div class="progress-container progress-primary">
                <span class="progress-badge">eCommerce Website</span>
                <div class="progress">
                  <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="86" aria-valuemin="0" aria-valuemax="100" style="width: 86%;">
                    <span class="progress-value">86%</span>
                  </div>
                </div>
                <ul class="list-unstyled team-info">
                  <li class="m-r-15"><small>Team</small></li>
                  <li>
                    <img src="/assets/images/xs/avatar2.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar3.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar4.jpg" alt="Avatar">
                  </li>
                </ul>
              </div>
            </li>
            <li>
              <div class="progress-container">
                <span class="progress-badge">iOS Game Dev</span>
                <div class="progress">
                  <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%;">
                    <span class="progress-value">45%</span>
                  </div>
                </div>
                <ul class="list-unstyled team-info">
                  <li class="m-r-15"><small>Team</small></li>
                  <li>
                    <img src="/assets/images/xs/avatar10.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar9.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar8.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar7.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar6.jpg" alt="Avatar">
                  </li>
                </ul>
              </div>
            </li>
            <li>
              <div class="progress-container progress-warning">
                <span class="progress-badge">Home Development</span>
                <div class="progress">
                  <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="29" aria-valuemin="0" aria-valuemax="100" style="width: 29%;">
                    <span class="progress-value">29%</span>
                  </div>
                </div>
                <ul class="list-unstyled team-info">
                  <li class="m-r-15"><small>Team</small></li>
                  <li>
                    <img src="/assets/images/xs/avatar5.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar2.jpg" alt="Avatar">
                  </li>
                  <li>
                    <img src="/assets/images/xs/avatar7.jpg" alt="Avatar">
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="javascript:void(0);" class="app_calendar" title="Calendar"><i class="zmdi zmdi-calendar"></i></a></li>
    <li><a href="javascript:void(0);" class="app_google_drive" title="Google Drive"><i class="zmdi zmdi-google-drive"></i></a></li>
    <li><a href="javascript:void(0);" class="app_group_work" title="Group Work"><i class="zmdi zmdi-group-work"></i></a></li>
    <li><a href="javascript:void(0);" class="js-right-sidebar" title="Setting"><i class="zmdi zmdi-settings zmdi-hc-spin"></i></a></li>
    <li><a href="sign-in.html" class="mega-menu" title="Sign Out"><i class="zmdi zmdi-power"></i></a></li>
  </ul>
</div>

<!-- Left Sidebar -->
<aside id="leftsidebar" class="sidebar">
  <div class="navbar-brand">
    <button class="btn-menu ls-toggle-btn" type="button"><i class="zmdi zmdi-menu"></i></button>
    <a th:href="@{/home/admin}"><img src="/assets/images/logovinci.png" width="100" alt="Aero"><span class="m-l-10">Aero</span></a>
  </div>
  <div class="menu">
    <ul class="list">
      <li>
        <div class="user-info">
          <a class="image" th:href="@{/home/admin/profil}"><img src="/assets/images/profile_av.jpg" alt="User"></a>
          <div class="detail">
            <h4>Michael</h4>
            <small>Super Admin</small>
          </div>
        </div>
      </li>
      <li class="active open"><a th:href="@{/home/admin}"><i class="zmdi zmdi-home"></i><span>Dashboard</span></a></li>
      <li><a th:href="@{/home/admin/profil}"><i class="zmdi zmdi-account"></i><span>Profile</span></a></li>
      <li><a th:href="@{/home/admin/material}"><i class="zmdi zmdi-shopping-cart"></i><span>List of Materials</span></a></li>
      <li><a th:href="@{/home/admin/category}"><i class="zmdi zmdi-collection-add"></i><span>List of Categories</span></a></li>
      <li><a th:href="@{/home/admin/suppliers}"><i class="zmdi zmdi-store"></i><span>List of Suppliers</span></a></li>
      <li><a th:href="@{/home/admin/users}"><i class="zmdi zmdi-folder-person"></i><span>List of Users</span></a></li>
      <li><a th:href="@{/home/admin/notifications}"><i class="zmdi zmdi-notifications"></i><span>Notifications</span></a></li>
      <li><a th:href="@{/home/admin/inbox}"><i class="zmdi zmdi-inbox"></i><span>INBOX</span></a></li>
      <li>
        <div class="progress-container progress-primary m-t-10">
          <span class="progress-badge">Traffic this Month</span>
          <div class="progress">
            <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="67" aria-valuemin="0" aria-valuemax="100" style="width: 67%;">
              <span class="progress-value">67%</span>
            </div>
          </div>
        </div>
        <div class="progress-container progress-info">
          <span class="progress-badge">Server Load</span>
          <div class="progress">
            <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="86" aria-valuemin="0" aria-valuemax="100" style="width: 86%;">
              <span class="progress-value">86%</span>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
</aside>
<!-- End Left sidebar

<-- Right Sidebar -->
<aside id="rightsidebar" class="right-sidebar">
  <ul class="nav nav-tabs sm">
    <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#setting"><i class="zmdi zmdi-settings zmdi-hc-spin"></i></a></li>
    <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#chat"><i class="zmdi zmdi-comments"></i></a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="setting">
      <div class="slim_scroll">
        <div class="card">
          <h6>Theme Option</h6>
          <div class="light_dark">
            <div class="radio">
              <input type="radio" name="radio1" id="lighttheme" value="light" checked="">
              <label for="lighttheme">Light Mode</label>
            </div>
            <div class="radio mb-0">
              <input type="radio" name="radio1" id="darktheme" value="dark">
              <label for="darktheme">Dark Mode</label>
            </div>
          </div>
        </div>
        <div class="card">
          <h6>Color Skins</h6>
          <ul class="choose-skin list-unstyled">
            <li data-theme="purple"><div class="purple"></div></li>
            <li data-theme="blue"><div class="blue"></div></li>
            <li data-theme="cyan"><div class="cyan"></div></li>
            <li data-theme="green"><div class="green"></div></li>
            <li data-theme="orange"><div class="orange"></div></li>
            <li data-theme="blush" class="active"><div class="blush"></div></li>
          </ul>
        </div>
        <div class="card">
          <h6>General Settings</h6>
          <ul class="setting-list list-unstyled">
            <li>
              <div class="checkbox rtl_support">
                <input id="checkbox1" type="checkbox" value="rtl_view">
                <label for="checkbox1">RTL Version</label>
              </div>
            </li>
            <li>
              <div class="checkbox ms_bar">
                <input id="checkbox2" type="checkbox" value="mini_active">
                <label for="checkbox2">Mini Sidebar</label>
              </div>
            </li>
            <li>
              <div class="checkbox">
                <input id="checkbox3" type="checkbox" checked="">
                <label for="checkbox3">Notifications</label>
              </div>
            </li>
            <li>
              <div class="checkbox">
                <input id="checkbox4" type="checkbox">
                <label for="checkbox4">Auto Updates</label>
              </div>
            </li>
            <li>
              <div class="checkbox">
                <input id="checkbox5" type="checkbox" checked="">
                <label for="checkbox5">Offline</label>
              </div>
            </li>
            <li>
              <div class="checkbox">
                <input id="checkbox6" type="checkbox" checked="">
                <label for="checkbox6">Location Permission</label>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="tab-pane right_chat" id="chat">
      <div class="slim_scroll">
        <div class="card">
          <ul class="list-unstyled">
            <li class="online">
              <a href="javascript:void(0);">
                <div class="media">
                  <img class="media-object " src="/assets/images/xs/avatar4.jpg" alt="">
                  <div class="media-body">
                    <span class="name">Sophia <small class="float-right">11:00AM</small></span>
                    <span class="message">There are many variations of passages of Lorem Ipsum available</span>
                    <span class="badge badge-outline status"></span>
                  </div>
                </div>
              </a>
            </li>
            <li class="online">
              <a href="javascript:void(0);">
                <div class="media">
                  <img class="media-object " src="/assets/images/xs/avatar5.jpg" alt="">
                  <div class="media-body">
                    <span class="name">Grayson <small class="float-right">11:30AM</small></span>
                    <span class="message">All the Lorem Ipsum generators on the</span>
                    <span class="badge badge-outline status"></span>
                  </div>
                </div>
              </a>
            </li>
            <li class="offline">
              <a href="javascript:void(0);">
                <div class="media">
                  <img class="media-object " src="/assets/images/xs/avatar2.jpg" alt="">
                  <div class="media-body">
                    <span class="name">Isabella <small class="float-right">11:31AM</small></span>
                    <span class="message">Contrary to popular belief, Lorem Ipsum</span>
                    <span class="badge badge-outline status"></span>
                  </div>
                </div>
              </a>
            </li>
            <li class="me">
              <a href="javascript:void(0);">
                <div class="media">
                  <img class="media-object " src="/assets/images/xs/avatar1.jpg" alt="">
                  <div class="media-body">
                    <span class="name">John <small class="float-right">05:00PM</small></span>
                    <span class="message">It is a long established fact that a reader</span>
                    <span class="badge badge-outline status"></span>
                  </div>
                </div>
              </a>
            </li>
            <li class="online">
              <a href="javascript:void(0);">
                <div class="media">
                  <img class="media-object " src="/assets/images/xs/avatar3.jpg" alt="">
                  <div class="media-body">
                    <span class="name">Alexander <small class="float-right">06:08PM</small></span>
                    <span class="message">Richard McClintock, a Latin professor</span>
                    <span class="badge badge-outline status"></span>
                  </div>
                </div>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</aside>


<section class="content">
    <div class="container-fluid">
      <div class="card">
        <div class="header">
          <h2><strong>Account</strong> Settings</h2>
        </div>
        <div class="body">
          <form th:action="@{/home/admin/profil/update}" method="post">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="email">E-mail</label>
                  <input type="email" id="email" name="email" class="form-control" placeholder="E-mail" th:value="${admin.email}" required>
                  <div id="emailError" class="invalid-feedback"></div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="phone">Phone</label>
                  <input type="tel" id="phone" name="phone" class="form-control" placeholder="Phone" th:value="${admin.phone}" required>
                  <div id="phoneError" class="invalid-feedback"></div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="username">Username</label>
                  <input type="text" id="username" name="username" class="form-control" th:value="${admin.username}" placeholder="Username" required>
                  <div id="usernameError" class="invalid-feedback"></div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="password">Password</label>
                  <input type="password" id="password" name="password" class="form-control" placeholder="Password" th:value="${admin.password}" required>
                  <div id="passwordError" class="invalid-feedback"></div>
                </div>
              </div>
              <div class="col-md-12 text-center">
                <button type="submit" class="btn btn-primary">Save Changes</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
</section>
<!-- Modal for displaying the image -->
<div id="imageModal" style="display: none;">
  <div style="background: rgba(0, 0, 0, 0.5); position: fixed; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: center;">
    <img id="modalImg" style="max-width: 90vw; max-height: 90vh; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);">
    <button onclick="closeModal()" style="position: absolute; top: 10px; right: 10px; background: #fff; border: none; padding: 10px; border-radius: 5px;">Close</button>
  </div>
</div>
<!-- Jquery Core Js -->
<script src="/assets/bundles/libscripts.bundle.js"></script> <!-- Lib Scripts Plugin Js -->
<script src="/assets/bundles/vendorscripts.bundle.js"></script> <!-- Lib Scripts Plugin Js -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="/assets/bundles/mainscripts.bundle.js"></script><!-- Custom Js -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('form');
    const submitButton = document.querySelector('button[type="submit"]');
    const usernameInput = document.getElementById('username');
    const emailInput = document.getElementById('email');
    const phoneInput = document.getElementById('phone');
    const passwordInput = document.getElementById('password');

    // Store the initial values to compare with user input
    const initialUsername = usernameInput.value.trim();
    const initialEmail = emailInput.value.trim();
    const initialPhone = phoneInput.value.trim();

    function validateField(input) {
      const field = input;
      const value = field.value.trim();
      const name = field.name;

      // Handle empty field validation
      if (value === '' && name !== 'password') {
        field.classList.add('is-invalid');
        field.classList.remove('is-valid');
        field.nextElementSibling.textContent = `${name.charAt(0).toUpperCase() + name.slice(1)} is required.`;
        return false;
      }

      // Handle validation based on server response only if the value has changed
      if (field === usernameInput && value !== initialUsername ||
              field === emailInput && value !== initialEmail ||
              field === phoneInput && value !== initialPhone) {
        return validateFieldWithServer(value, name);
      }

      // If value is not changed or no validation required
      return true;
    }

    async function validateFieldWithServer(value, fieldName) {
      let isValid = true;
      const response = await fetch(`/home/admin/profil/validateUpdate?${fieldName}=${encodeURIComponent(value)}`);
      const data = await response.json();

      if (data[fieldName]) {
        document.getElementById(fieldName).classList.add('is-invalid');
        document.getElementById(fieldName).classList.remove('is-valid');
        document.getElementById(`${fieldName}Error`).textContent = data[fieldName];
        isValid = false;
      } else {
        document.getElementById(fieldName).classList.add('is-valid');
        document.getElementById(fieldName).classList.remove('is-invalid');
        document.getElementById(`${fieldName}Error`).textContent = '';
      }

      return isValid;
    }

    function validateForm() {
      const usernameValid = validateField(usernameInput);
      const emailValid = validateField(emailInput);
      const phoneValid = validateField(phoneInput);
      const passwordValid = passwordInput.value.trim() !== '' || passwordInput.value === '';

      // Check if any field has been modified from the initial value
      const isModified = usernameInput.value.trim() !== initialUsername ||
              emailInput.value.trim() !== initialEmail ||
              phoneInput.value.trim() !== initialPhone;

      // Enable submit button if all fields are valid and at least one field is modified
      submitButton.disabled = !(usernameValid && emailValid && phoneValid && passwordValid && isModified);
    }

    function handleInputChange() {
      validateForm();
    }

    // Attach event listeners
    usernameInput.addEventListener('input', handleInputChange);
    emailInput.addEventListener('input', handleInputChange);
    phoneInput.addEventListener('input', handleInputChange);
    passwordInput.addEventListener('input', handleInputChange);

    // Initial validation
    validateForm();
  });
</script>
</body>
</html>